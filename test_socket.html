<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Socket.IO</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; }
        input, button { padding: 10px; margin: 5px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Socket.IO - T·∫°o ph√≤ng</h1>
        
        <div class="form-group">
            <label for="room-name">T√™n ph√≤ng:</label>
            <input type="text" id="room-name" placeholder="Nh·∫≠p t√™n ph√≤ng" value="Test Room">
        </div>
        
        <div class="form-group">
            <button id="create-room-btn">T·∫°o ph√≤ng</button>
            <button id="test-connection-btn">Test k·∫øt n·ªëi</button>
        </div>
        
        <div class="log" id="log">
            <strong>Log:</strong><br>
            <div id="log-content"></div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket;
        
        function log(message, type = 'info') {
            const logContent = document.getElementById('log-content');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : '';
            logContent.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logContent.scrollTop = logContent.scrollHeight;
        }
        
        function connectSocket() {
            log('ƒêang k·∫øt n·ªëi Socket.IO...');
            socket = io();
            
            socket.on('connect', () => {
                log('‚úÖ ƒê√£ k·∫øt n·ªëi Socket.IO th√†nh c√¥ng! ID: ' + socket.id, 'success');
            });
            
            socket.on('connect_error', (error) => {
                log('‚ùå L·ªói k·∫øt n·ªëi Socket.IO: ' + error.message, 'error');
            });
            
            socket.on('disconnect', (reason) => {
                log('üîå Socket.IO ƒë√£ ng·∫Øt k·∫øt n·ªëi: ' + reason);
            });
        }
        
        document.getElementById('test-connection-btn').addEventListener('click', function() {
            connectSocket();
        });
        
        document.getElementById('create-room-btn').addEventListener('click', function() {
            if (!socket) {
                log('‚ùå Ch∆∞a k·∫øt n·ªëi Socket.IO. Vui l√≤ng test k·∫øt n·ªëi tr∆∞·ªõc.', 'error');
                return;
            }
            
            const roomName = document.getElementById('room-name').value.trim();
            if (!roomName) {
                log('‚ùå Vui l√≤ng nh·∫≠p t√™n ph√≤ng.', 'error');
                return;
            }
            
            log('üöÄ ƒêang t·∫°o ph√≤ng: ' + roomName);
            
            socket.emit('create_room', {
                userId: 1, // Test user ID
                username: 'testuser', // Test username
                roomName: roomName
            }, function(response) {
                log('üì® Ph·∫£n h·ªìi t·ª´ server: ' + JSON.stringify(response));
                
                if (response.success) {
                    log('‚úÖ T·∫°o ph√≤ng th√†nh c√¥ng! M√£ ph√≤ng: ' + response.room.code, 'success');
                } else {
                    log('‚ùå Kh√¥ng th·ªÉ t·∫°o ph√≤ng: ' + response.error, 'error');
                }
            });
        });
        
        // T·ª± ƒë·ªông k·∫øt n·ªëi khi trang load
        window.addEventListener('load', function() {
            log('üåê Trang ƒë√£ load, s·∫µn s√†ng test...');
        });
    </script>
</body>
</html> 