<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Solo Battle - Hi·ªÉn Th·ªã ƒê√°p √Ån</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #0056b3;
        }
        
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #1e7e34; }
        
        .btn-warning { background: #ffc107; }
        .btn-warning:hover { background: #e0a800; }
        
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        
        /* Question review styles */
        .question-review-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .question-review-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .question-review-item.correct {
            border-left: 4px solid #28a745;
            background: #f8fff9;
        }
        
        .question-review-item.incorrect {
            border-left: 4px solid #dc3545;
            background: #fff8f8;
        }
        
        .question-review-item.unanswered {
            border-left: 4px solid #6c757d;
            background: #f8f9fa;
            opacity: 0.7;
        }
        
        .question-review-item h4 {
            color: #495057;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        
        .question-review-item p {
            margin: 0.5rem 0;
            color: #6c757d;
        }
        
        .question-review-item p:first-of-type {
            font-weight: 500;
            color: #495057;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-warning { background: #ffc107; }
        .status-info { background: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test Solo Battle - Hi·ªÉn Th·ªã ƒê√°p √Ån</h1>
        
        <div class="test-section">
            <h3>üéØ Logic M·ªõi</h3>
            <p><strong>1.</strong> Hi·ªÉn th·ªã ƒë√°p √°n cho t·∫•t c·∫£ 12 c√¢u h·ªèi</p>
            <p><strong>2.</strong> C√¢u ƒë√∫ng: M√†u xanh v·ªõi border-left xanh</p>
            <p><strong>3.</strong> C√¢u sai: M√†u ƒë·ªè v·ªõi border-left ƒë·ªè</p>
            <p><strong>4.</strong> C√¢u kh√¥ng tr·∫£ l·ªùi: M√†u x√°m m·ªù v·ªõi border-left x√°m</p>
        </div>
        
        <div class="test-section">
            <h3>üéÆ Test Flow</h3>
            <button id="test-answers-btn" class="btn btn-success">Test Hi·ªÉn Th·ªã ƒê√°p √Ån</button>
            <button id="reset-btn" class="btn btn-danger">Reset</button>
        </div>
        
        <div class="test-section">
            <h3>üìä Tr·∫°ng Th√°i</h3>
            <div id="status-display">
                <div>Questions Length: <span id="questions-length-text">0</span></div>
                <div>User Answers Length: <span id="user-answers-length-text">0</span></div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìù Console Log</h3>
            <div id="console-log" class="debug-info" style="max-height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 5px;">
                <div>Console log s·∫Ω hi·ªán ·ªü ƒë√¢y...</div>
            </div>
        </div>
    </div>
    
    <!-- Container ƒë·ªÉ hi·ªÉn th·ªã ƒë√°p √°n -->
    <div id="answers-container" class="container" style="display: none;">
        <h2>üìö ƒê√°p √Ån T·ª´ng C√¢u</h2>
        <div id="question-review-list">
            <!-- Question review will be dynamically generated here -->
        </div>
    </div>
    
    <script>
        // Console log override ƒë·ªÉ hi·ªÉn th·ªã trong UI
        const originalLog = console.log;
        const consoleLogDiv = document.getElementById('console-log');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logEntry = document.createElement('div');
            logEntry.textContent = new Date().toLocaleTimeString() + ': ' + args.join(' ');
            consoleLogDiv.appendChild(logEntry);
            consoleLogDiv.scrollTop = consoleLogDiv.scrollHeight;
        };
        
        // D·ªØ li·ªáu test gi·∫£ l·∫≠p
        let questions = [];
        let userAnswers = [];
        
        // H√†m t·∫°o d·ªØ li·ªáu test
        function createTestData() {
            // T·∫°o 12 c√¢u h·ªèi
            questions = [
                { id: 1, text: 'Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?', answer: 'H√† N·ªôi' },
                { id: 2, text: 'Th·ªß ƒë√¥ c·ªßa Trung Qu·ªëc l√† g√¨?', answer: 'B·∫Øc Kinh' },
                { id: 3, text: 'Th·ªß ƒë√¥ c·ªßa Ph√°p l√† g√¨?', answer: 'Paris' },
                { id: 4, text: 'Th·ªß ƒë√¥ c·ªßa ƒê·ª©c l√† g√¨?', answer: 'Berlin' },
                { id: 5, text: 'Th·ªß ƒë√¥ c·ªßa √ù l√† g√¨?', answer: 'Roma' },
                { id: 6, text: 'Th·ªß ƒë√¥ c·ªßa T√¢y Ban Nha l√† g√¨?', answer: 'Madrid' },
                { id: 7, text: 'Th·ªß ƒë√¥ c·ªßa Nh·∫≠t B·∫£n l√† g√¨?', answer: 'Tokyo' },
                { id: 8, text: 'Th·ªß ƒë√¥ c·ªßa H√†n Qu·ªëc l√† g√¨?', answer: 'Seoul' },
                { id: 9, text: 'Th·ªß ƒë√¥ c·ªßa Th√°i Lan l√† g√¨?', answer: 'Bangkok' },
                { id: 10, text: 'Th·ªß ƒë√¥ c·ªßa Anh l√† g√¨?', answer: 'London' },
                { id: 11, text: 'Th·ªß ƒë√¥ c·ªßa Nga l√† g√¨?', answer: 'Moscow' },
                { id: 12, text: 'Th·ªß ƒë√¥ c·ªßa Canada l√† g√¨?', answer: 'Ottawa' }
            ];
            
            // T·∫°o m·ªôt s·ªë c√¢u tr·∫£ l·ªùi (gi·∫£ l·∫≠p ng∆∞·ªùi ch∆°i tr·∫£ l·ªùi 4 c√¢u)
            userAnswers = [
                {
                    questionId: 1,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?',
                    userAnswer: 'H√† N·ªôi',
                    correctAnswer: 'H√† N·ªôi',
                    isCorrect: true
                },
                {
                    questionId: 3,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Ph√°p l√† g√¨?',
                    userAnswer: 'Paris',
                    correctAnswer: 'Paris',
                    isCorrect: true
                },
                {
                    questionId: 7,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Nh·∫≠t B·∫£n l√† g√¨?',
                    userAnswer: 'Tokyo',
                    correctAnswer: 'Tokyo',
                    isCorrect: true
                },
                {
                    questionId: 10,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Anh l√† g√¨?',
                    userAnswer: 'London',
                    correctAnswer: 'London',
                    isCorrect: true
                }
            ];
            
            // L∆∞u t·∫•t c·∫£ c√¢u h·ªèi c√≤n l·∫°i nh∆∞ kh√¥ng tr·∫£ l·ªùi (gi·ªëng solo battle)
            for (let i = 0; i < questions.length; i++) {
                const question = questions[i];
                const existingAnswer = userAnswers.find(a => a.questionId === question.id);
                
                if (!existingAnswer) {
                    userAnswers.push({
                        questionId: question.id,
                        questionText: question.text,
                        userAnswer: null,
                        correctAnswer: question.answer,
                        isCorrect: false
                    });
                }
            }
            
            console.log('‚úÖ ƒê√£ t·∫°o d·ªØ li·ªáu test:', {
                questionsLength: questions.length,
                userAnswersLength: userAnswers.length
            });
            
            updateStatus();
        }
        
        // H√†m hi·ªÉn th·ªã ƒë√°p √°n (copy t·ª´ solo-battle.js ƒë√£ s·ª≠a)
        function showQuestionReview() {
            console.log('üìö Hi·ªÉn th·ªã ƒë√°p √°n t·ª´ng c√¢u...');
            console.log('üìö questions:', questions);
            console.log('üìö userAnswers:', userAnswers);
            
            const questionReviewListEl = document.getElementById('question-review-list');
            if (!questionReviewListEl) {
                console.error('‚ùå Kh√¥ng t√¨m th·∫•y question-review-list element!');
                return;
            }
            
            // X√≥a n·ªôi dung c≈©
            questionReviewListEl.innerHTML = '';
            
            // Ki·ªÉm tra xem c√≥ c√¢u h·ªèi kh√¥ng
            if (!questions || questions.length === 0) {
                questionReviewListEl.innerHTML = '<p class="text-muted">Kh√¥ng c√≥ c√¢u h·ªèi n√†o ƒë·ªÉ hi·ªÉn th·ªã.</p>';
                return;
            }
            
            // Hi·ªÉn th·ªã ƒë√°p √°n cho t·∫•t c·∫£ c√¢u h·ªèi
            for (let i = 0; i < questions.length; i++) {
                const div = document.createElement('div');
                const question = questions[i];
                
                // T√¨m c√¢u tr·∫£ l·ªùi t∆∞∆°ng ·ª©ng (n·∫øu c√≥)
                const answer = userAnswers.find(a => a.questionId === question.id);
                
                if (answer && answer.userAnswer !== null) {
                    // C√≥ c√¢u tr·∫£ l·ªùi
                    div.className = `question-review-item ${answer.isCorrect ? 'correct' : 'incorrect'}`;
                    
                    div.innerHTML = `
                        <h4>C√¢u ${i + 1}: ${answer.questionText}</h4>
                        <p>C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n: <strong>${answer.userAnswer}</strong></p>
                        <p>C√¢u tr·∫£ l·ªùi ƒë√∫ng: <strong>${answer.correctAnswer}</strong></p>
                        <p>ƒêi·ªÉm: <strong>${answer.isCorrect ? '10' : '0'}</strong></p>
                    `;
                } else {
                    // Kh√¥ng c√≥ c√¢u tr·∫£ l·ªùi (c√¢u h·ªèi b·ªã b·ªè qua)
                    div.className = 'question-review-item unanswered';
                    
                    div.innerHTML = `
                        <h4>C√¢u ${i + 1}: ${question.text}</h4>
                        <p>C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n: <strong>Kh√¥ng tr·∫£ l·ªùi</strong></p>
                        <p>C√¢u tr·∫£ l·ªùi ƒë√∫ng: <strong>${question.answer}</strong></p>
                        <p>ƒêi·ªÉm: <strong>0</strong></p>
                    `;
                }
                
                questionReviewListEl.appendChild(div);
            }
            
            console.log('‚úÖ ƒê√£ hi·ªÉn th·ªã ƒë√°p √°n cho t·∫•t c·∫£', questions.length, 'c√¢u h·ªèi');
        }
        
        // Update status display
        function updateStatus() {
            document.getElementById('questions-length-text').textContent = questions.length;
            document.getElementById('user-answers-length-text').textContent = userAnswers.length;
        }
        
        // Event listeners
        document.getElementById('test-answers-btn').addEventListener('click', function() {
            console.log('üìö Test hi·ªÉn th·ªã ƒë√°p √°n ƒë∆∞·ª£c click');
            
            if (questions.length === 0) {
                console.log('üìö T·∫°o d·ªØ li·ªáu test tr∆∞·ªõc...');
                createTestData();
            }
            
            // Hi·ªÉn th·ªã container ƒë√°p √°n
            document.getElementById('answers-container').style.display = 'block';
            
            // G·ªçi h√†m hi·ªÉn th·ªã ƒë√°p √°n
            showQuestionReview();
        });
        
        document.getElementById('reset-btn').addEventListener('click', function() {
            console.log('üîÑ Reset ƒë∆∞·ª£c click');
            questions = [];
            userAnswers = [];
            document.getElementById('answers-container').style.display = 'none';
            updateStatus();
        });
        
        // Initialize
        console.log('üöÄ Test solo battle page ƒë√£ load');
        updateStatus();
    </script>
</body>
</html> 