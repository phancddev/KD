<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Room Battle Logic M·ªõi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #0056b3;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #000;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .battle-countdown {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(220, 53, 69, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: popupFadeIn 0.3s ease-out;
        }
        
        .battle-countdown-content {
            text-align: center;
        }
        
        .battle-countdown-number {
            font-size: 120px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: countdownPulse 1s ease-in-out infinite;
        }
        
        @keyframes popupFadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes countdownPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }
        
        .debug-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-warning { background: #ffc107; }
        .status-info { background: #17a2b8; }
        
        /* Loading message khi chu·∫©n b·ªã tr·∫≠n ƒë·∫•u */
        .loading-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            border-radius: 10px;
        }
        
        .loading-content {
            text-align: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #dc2626;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-content h3 {
            color: #dc2626;
            margin-bottom: 0.5rem;
        }
        
        .loading-content p {
            color: #666;
            margin: 0;
        }
        
        /* Question review styles */
        .question-review-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .question-review-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .question-review-item.correct {
            border-left: 4px solid #28a745;
            background: #f8fff9;
        }
        
        .question-review-item.incorrect {
            border-left: 4px solid #dc3545;
            background: #fff8f8;
        }
        
        .question-review-item.unanswered {
            border-left: 4px solid #6c757d;
            background: #f8f9fa;
            opacity: 0.7;
        }
        
        .question-review-item h4 {
            color: #495057;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        
        .question-review-item p {
            margin: 0.5rem 0;
            color: #6c757d;
        }
        
        .question-review-item p:first-of-type {
            font-weight: 500;
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Room Battle Logic M·ªõi</h1>
        
        <div class="test-section">
            <h3>üéØ Logic M·ªõi</h3>
            <p><strong>1.</strong> Khi ng∆∞·ªùi ch∆°i tham gia ph√≤ng ‚Üí Sound ƒë∆∞·ª£c preload</p>
            <p><strong>2.</strong> Khi ch·ªß ph√≤ng b·∫•m b·∫Øt ƒë·∫ßu ‚Üí Gi·ªØ ·ªü trang ph√≤ng ch·ªù 3 gi√¢y ƒë·ªÉ load sound</p>
            <p><strong>3.</strong> Sau khi load xong ‚Üí Chuy·ªÉn v√†o trang thi ƒë·∫•u</p>
            <p><strong>4.</strong> Khi c√≥ c√¢u h·ªèi ‚Üí G·ªçi ngay countdown 5 gi√¢y + sound pre</p>
            <p><strong>5.</strong> Sau khi k·∫øt th√∫c ‚Üí Hi·ªÉn th·ªã ƒë√°p √°n t·ª´ng c√¢u gi·ªëng solo-battle</p>
        </div>
        
        <div class="test-section">
            <h3>üéÆ Test Flow</h3>
            <button id="join-room-btn" class="btn btn-success">1. Tham gia ph√≤ng (Preload Sound)</button>
            <button id="start-game-btn" class="btn btn-warning">2. B·∫Øt ƒë·∫ßu game (Load Sound 3s)</button>
            <button id="trigger-questions-btn" class="btn btn-info">3. Trigger Questions (Countdown 5s + Sound)</button>
            <button id="show-answers-btn" class="btn btn-primary">4. Xem ƒë√°p √°n t·ª´ng c√¢u</button>
            <button id="reset-btn" class="btn btn-danger">Reset</button>
        </div>
        
        <div class="test-section">
            <h3>üìä Tr·∫°ng th√°i hi·ªán t·∫°i</h3>
            <div class="debug-info">
                <div><span class="status-indicator" id="sound-status"></span>Sound Status: <span id="sound-status-text">Ch∆∞a preload</span></div>
                <div><span class="status-indicator" id="countdown-status"></span>Countdown Status: <span id="countdown-status-text">Ch∆∞a b·∫Øt ƒë·∫ßu</span></div>
                <div>Sound Enabled: <span id="sound-enabled-text">true</span></div>
                <div>Is Countdown Active: <span id="countdown-active-text">false</span></div>
                <div>All Questions Length: <span id="questions-length-text">0</span></div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìù Console Log</h3>
            <div id="console-log" class="debug-info" style="max-height: 200px; overflow-y: auto;">
                <div>Console log s·∫Ω hi·ªán ·ªü ƒë√¢y...</div>
            </div>
        </div>
    </div>
    
    <!-- Battle countdown -->
    <div id="battle-countdown" class="battle-countdown">
        <div class="battle-countdown-content">
            <div class="battle-countdown-number" id="battle-countdown-number">5</div>
        </div>
    </div>
    
    <!-- Audio elements -->
    <audio id="battle-sound" preload="auto">
        <source src="/sounds/soudKD.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="pre-battle-sound" preload="auto">
        <source src="/sounds/pre_KD.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        // Console log override ƒë·ªÉ hi·ªÉn th·ªã trong UI
        const originalLog = console.log;
        const consoleLogDiv = document.getElementById('console-log');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logEntry = document.createElement('div');
            logEntry.textContent = new Date().toLocaleTimeString() + ': ' + args.join(' ');
            consoleLogDiv.appendChild(logEntry);
            consoleLogDiv.scrollTop = consoleLogDiv.scrollHeight;
        };
        
        // Get elements
        const battleCountdown = document.getElementById('battle-countdown');
        const battleCountdownNumber = document.getElementById('battle-countdown-number');
        const battleSound = document.getElementById('battle-sound');
        const preBattleSound = document.getElementById('pre-battle-sound');
        
        // State variables (copy t·ª´ room-battle.js)
        let soundEnabled = true;
        let isCountdownActive = false;
        let allQuestions = []; // L∆∞u t·∫•t c·∫£ c√¢u h·ªèi
        let myQuestionOrder = []; // Th·ª© t·ª± c√¢u h·ªèi c·ªßa t√¥i
        let currentQuestionIndex = 0; // Reset v·ªÅ c√¢u ƒë·∫ßu ti√™n
        let totalTimeRemaining = 60; // 60 gi√¢y t·ªïng
        
        // Update status display
        function updateStatus() {
            // Sound status
            const soundStatus = document.getElementById('sound-status');
            const soundStatusText = document.getElementById('sound-status-text');
            if (battleSound && preBattleSound) {
                soundStatus.className = 'status-indicator status-success';
                soundStatusText.textContent = '‚úÖ ƒê√£ preload';
            } else {
                soundStatus.className = 'status-indicator status-error';
                soundStatusText.textContent = '‚ùå Ch∆∞a preload';
            }
            
            // Countdown status
            const countdownStatus = document.getElementById('countdown-status');
            const countdownStatusText = document.getElementById('countdown-status-text');
            if (isCountdownActive) {
                countdownStatus.className = 'status-indicator status-warning';
                countdownStatusText.textContent = '‚è∞ ƒêang ƒë·∫øm ng∆∞·ª£c';
            } else {
                countdownStatus.className = 'status-indicator status-info';
                countdownStatusText.textContent = '‚è≥ S·∫µn s√†ng';
            }
            
            // Other status
            document.getElementById('sound-enabled-text').textContent = soundEnabled;
            document.getElementById('countdown-active-text').textContent = isCountdownActive;
            document.getElementById('questions-length-text').textContent = allQuestions.length;
        }
        
        // Preload sound function (copy t·ª´ room-battle.js)
        function prepareBattleSound() {
            console.log('üîä prepareBattleSound ƒë∆∞·ª£c g·ªçi');
            
            if (battleSound) {
                // ƒê·∫∑t √¢m l∆∞·ª£ng m·∫∑c ƒë·ªãnh
                battleSound.volume = 0.7;
                // Preload √¢m thanh
                battleSound.load();
                console.log('‚úÖ battleSound ƒë√£ ƒë∆∞·ª£c chu·∫©n b·ªã');
            } else {
                console.log('‚ùå battleSound kh√¥ng t·ªìn t·∫°i');
            }
            
            if (preBattleSound) {
                // ƒê·∫∑t √¢m l∆∞·ª£ng m·∫∑c ƒë·ªãnh
                preBattleSound.volume = 0.7;
                // Preload √¢m thanh
                preBattleSound.load();
                console.log('‚úÖ preBattleSound ƒë√£ ƒë∆∞·ª£c chu·∫©n b·ªã');
            } else {
                console.log('‚ùå preBattleSound kh√¥ng t·ªìn t·∫°i');
            }
            
            updateStatus();
        }
        
        // H√†m hi·ªÉn th·ªã ƒë√°p √°n t·ª´ng c√¢u (copy t·ª´ room-battle.js)
        function showQuestionReview() {
            console.log('üìö Hi·ªÉn th·ªã ƒë√°p √°n t·ª´ng c√¢u...');
            console.log('üìö gameAnswers:', window.gameAnswers);
            
            // T·∫°o container ƒë·ªÉ hi·ªÉn th·ªã ƒë√°p √°n
            let answersContainer = document.getElementById('answers-container');
            if (!answersContainer) {
                answersContainer = document.createElement('div');
                answersContainer.id = 'answers-container';
                answersContainer.className = 'test-section';
                answersContainer.innerHTML = '<h3>üìö ƒê√°p √°n t·ª´ng c√¢u</h3>';
                document.querySelector('.test-container').appendChild(answersContainer);
            }
            
            // X√≥a n·ªôi dung c≈©
            answersContainer.innerHTML = '<h3>üìö ƒê√°p √°n t·ª´ng c√¢u</h3>';
            
            // Ki·ªÉm tra xem c√≥ c√¢u tr·∫£ l·ªùi kh√¥ng
            if (!window.gameAnswers || window.gameAnswers.length === 0) {
                answersContainer.innerHTML += '<p class="text-muted">Kh√¥ng c√≥ c√¢u tr·∫£ l·ªùi n√†o ƒë·ªÉ hi·ªÉn th·ªã.</p>';
                return;
            }
            
            // Hi·ªÉn th·ªã t·ª´ng c√¢u tr·∫£ l·ªùi theo th·ª© t·ª± ƒë√£ tr·∫£ l·ªùi
            window.gameAnswers.forEach((answer, index) => {
                const div = document.createElement('div');
                div.className = `question-review-item ${answer.isCorrect ? 'correct' : 'incorrect'}`;
                
                div.innerHTML = `
                    <h4>C√¢u ${index + 1}: ${answer.questionText || `C√¢u h·ªèi ${index + 1}`}</h4>
                    <p>C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n: <strong>${answer.userAnswer || 'Kh√¥ng tr·∫£ l·ªùi'}</strong></p>
                    <p>C√¢u tr·∫£ l·ªùi ƒë√∫ng: <strong>${answer.correctAnswer || 'Kh√¥ng c√≥ ƒë√°p √°n'}</strong></p>
                    <p>ƒêi·ªÉm: <strong>${answer.isCorrect ? '10' : '0'}</strong></p>
                    ${answer.answerTime ? `<p>Th·ªùi gian tr·∫£ l·ªùi: <strong>${answer.answerTime}s</strong></p>` : ''}
                `;
                
                answersContainer.appendChild(div);
            });
            
            console.log('‚úÖ ƒê√£ hi·ªÉn th·ªã ƒë√°p √°n cho', window.gameAnswers.length, 'c√¢u h·ªèi');
        }
        
        // Simulate question data
        function simulateQuestions() {
            allQuestions = [
                { id: 1, text: "C√¢u h·ªèi test 1", answer: "ƒë√°p √°n 1" },
                { id: 2, text: "C√¢u h·ªèi test 2", answer: "ƒë√°p √°n 2" },
                { id: 3, text: "C√¢u h·ªèi test 3", answer: "ƒë√°p √°n 3" }
            ];
            myQuestionOrder = [0, 1, 2]; // Th·ª© t·ª± c√¢u h·ªèi
            currentQuestionIndex = 0;
            console.log('‚úÖ ƒê√£ t·∫°o c√¢u h·ªèi test:', allQuestions);
            updateStatus();
        }
        
        // Show battle countdown function (copy t·ª´ room-battle.js)
        function showBattleCountdown() {
            console.log('üéØ showBattleCountdown ƒë∆∞·ª£c g·ªçi!');
            console.log('üîä soundEnabled:', soundEnabled);
            console.log('‚è∞ isCountdownActive:', isCountdownActive);
            console.log('üìö allQuestions length:', allQuestions.length);
            console.log('üî¢ myQuestionOrder:', myQuestionOrder);
            console.log('üìç currentQuestionIndex:', currentQuestionIndex);
            
            if (!soundEnabled || isCountdownActive) {
                console.log('‚ùå Kh√¥ng th·ªÉ hi·ªán countdown - soundEnabled:', soundEnabled, 'isCountdownActive:', isCountdownActive);
                return;
            }
            
            // Ki·ªÉm tra xem c√≥ c√¢u h·ªèi kh√¥ng
            if (allQuestions.length === 0) {
                console.log('‚ùå Kh√¥ng th·ªÉ hi·ªán countdown - ch∆∞a c√≥ c√¢u h·ªèi');
                return;
            }
            
            // Ki·ªÉm tra xem c√°c element c√≥ t·ªìn t·∫°i kh√¥ng
            if (!battleCountdown) {
                console.error('‚ùå battleCountdown kh√¥ng t·ªìn t·∫°i!');
                return;
            }
            if (!battleCountdownNumber) {
                console.error('‚ùå battleCountdownNumber kh√¥ng t·ªìn t·∫°i!');
                return;
            }
            
            isCountdownActive = true;
            console.log('‚úÖ B·∫Øt ƒë·∫ßu hi·ªÉn th·ªã countdown 5 gi√¢y!');
            
            // Hi·ªÉn th·ªã countdown
            battleCountdown.style.display = 'flex';
            battleCountdownNumber.textContent = '5';
            console.log('üì± Countdown ƒë√£ hi·ªán, s·ªë ƒë·∫øm: 5');
            
            // Ph√°t √¢m thanh pre-battle
            if (preBattleSound) {
                preBattleSound.currentTime = 0;
                preBattleSound.volume = 0.7;
                preBattleSound.play().catch(error => {
                    console.log('‚ùå Kh√¥ng th·ªÉ ph√°t √¢m thanh pre-battle:', error);
                });
                console.log('üîä ƒêang ph√°t √¢m thanh pre-battle...');
            } else {
                console.log('‚ùå preBattleSound kh√¥ng t·ªìn t·∫°i!');
                console.error('‚ùå preBattleSound element kh√¥ng t√¨m th·∫•y!');
            }
            
            // Tranh th·ªß g·ªçi c√¢u h·ªèi v·ªÅ trong l√∫c ƒë·∫øm ng∆∞·ª£c
            console.log('üîÑ ƒêang chu·∫©n b·ªã c√¢u h·ªèi trong l√∫c ƒë·∫øm ng∆∞·ª£c...');
            
            // Chu·∫©n b·ªã c√¢u h·ªèi ƒë·∫ßu ti√™n ngay l·∫≠p t·ª©c
            const questionIndex = myQuestionOrder[currentQuestionIndex];
            const question = allQuestions[questionIndex];
            console.log('‚úÖ Chu·∫©n b·ªã c√¢u h·ªèi ƒë·∫ßu ti√™n:', question);
            console.log('üî¢ questionIndex:', questionIndex);
            console.log('üìö question object:', question);
            
            if (question) {
                console.log('‚úÖ C√¢u h·ªèi ƒë√£ s·∫µn s√†ng:', question.text);
            } else {
                console.error('‚ùå Kh√¥ng th·ªÉ l·∫•y c√¢u h·ªèi t·ª´ allQuestions!');
            }
            
            // ƒê·∫øm ng∆∞·ª£c t·ª´ 5 gi√¢y
            let count = 5;
            const countdownInterval = setInterval(() => {
                count--;
                battleCountdownNumber.textContent = count;
                console.log('‚è∞ ƒê·∫øm ng∆∞·ª£c:', count);
                
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    isCountdownActive = false;
                    console.log('‚úÖ ƒê·∫øm ng∆∞·ª£c ho√†n th√†nh, ·∫©n countdown sau 1 gi√¢y...');
                    // ·∫®n countdown sau 1 gi√¢y
                    setTimeout(() => {
                        if (battleCountdown) {
                            battleCountdown.style.display = 'none';
                            console.log('ÔøΩÔøΩ Countdown ƒë√£ ·∫©n, b·∫Øt ƒë·∫ßu tr·∫≠n ƒë·∫•u...');
                            updateStatus();
                        } else {
                            console.error('‚ùå battleCountdown kh√¥ng t·ªìn t·∫°i khi ·∫©n!');
                        }
                    }, 1000);
                }
            }, 1000);
            
            updateStatus();
        }
        
        // Event listeners
        document.getElementById('join-room-btn').addEventListener('click', function() {
            console.log('üë• Tham gia ph√≤ng ƒë∆∞·ª£c click');
            console.log('üîä Preload sound khi tham gia ph√≤ng...');
            prepareBattleSound();
        });
        
        document.getElementById('start-game-btn').addEventListener('click', function() {
            console.log('üéÆ B·∫Øt ƒë·∫ßu game ƒë∆∞·ª£c click');
            console.log('üì± Gi·ªØ nguy√™n ·ªü trang ph√≤ng ch·ªù ƒë·ªÉ load sound...');
            
            // Hi·ªÉn th·ªã th√¥ng b√°o ƒëang load
            const testContainer = document.querySelector('.test-container');
            const loadingMessage = document.createElement('div');
            loadingMessage.className = 'loading-message';
            loadingMessage.innerHTML = `
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h3>ƒêang chu·∫©n b·ªã tr·∫≠n ƒë·∫•u...</h3>
                    <p>Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
                </div>
            `;
            testContainer.appendChild(loadingMessage);
            
            // Load sound trong 3 gi√¢y
            console.log('üîä B·∫Øt ƒë·∫ßu load sound trong 3 gi√¢y...');
            setTimeout(() => {
                console.log('‚úÖ ƒê√£ load sound xong, chuy·ªÉn v√†o trang thi ƒë·∫•u...');
                
                // X√≥a th√¥ng b√°o loading
                if (loadingMessage.parentNode) {
                    loadingMessage.parentNode.removeChild(loadingMessage);
                }
                
                console.log('‚úÖ ƒê√£ chuy·ªÉn sang ph√≤ng thi ƒë·∫•u, ch·ªù event new_question_start...');
            }, 3000);
        });
        
        document.getElementById('trigger-questions-btn').addEventListener('click', function() {
            console.log('üìö Trigger questions ƒë∆∞·ª£c click');
            if (allQuestions.length === 0) {
                console.log('üìö T·∫°o c√¢u h·ªèi test tr∆∞·ªõc...');
                simulateQuestions();
            }
            console.log('üéØ G·ªçi ƒë·ªìng lo·∫°t showBattleCountdown cho t·∫•t c·∫£ ng∆∞·ªùi ch∆°i...');
            showBattleCountdown();
        });
        
        document.getElementById('show-answers-btn').addEventListener('click', function() {
            console.log('üìö Xem ƒë√°p √°n t·ª´ng c√¢u ƒë∆∞·ª£c click');
            
            // T·∫°o d·ªØ li·ªáu test gi·∫£ l·∫≠p v·ªõi c·∫•u tr√∫c gi·ªëng solo-battle
            const mockGameAnswers = [
                {
                    questionId: 1,
                    userAnswer: 'H√† N·ªôi',
                    isCorrect: true,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?',
                    correctAnswer: 'H√† N·ªôi',
                    answerTime: 5
                },
                {
                    questionId: 3,
                    userAnswer: 'Paris',
                    isCorrect: false,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Ph√°p l√† g√¨?',
                    correctAnswer: 'Paris',
                    answerTime: 8
                },
                {
                    questionId: 7,
                    userAnswer: 'Tokyo',
                    isCorrect: true,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Nh·∫≠t B·∫£n l√† g√¨?',
                    correctAnswer: 'Tokyo',
                    answerTime: 3
                },
                {
                    questionId: 10,
                    userAnswer: 'London',
                    isCorrect: false,
                    questionText: 'Th·ªß ƒë√¥ c·ªßa Anh l√† g√¨?',
                    correctAnswer: 'London',
                    answerTime: 12
                }
            ];
            
            // G√°n d·ªØ li·ªáu test
            window.gameAnswers = mockGameAnswers;
            
            // G·ªçi h√†m hi·ªÉn th·ªã ƒë√°p √°n
            if (typeof showQuestionReview === 'function') {
                showQuestionReview();
            } else {
                console.log('‚ùå H√†m showQuestionReview ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a');
            }
        });
        
        document.getElementById('reset-btn').addEventListener('click', function() {
            console.log('üîÑ Reset ƒë∆∞·ª£c click');
            isCountdownActive = false;
            battleCountdown.style.display = 'none';
            if (preBattleSound) preBattleSound.pause();
            if (battleSound) battleSound.pause();
            allQuestions = [];
            updateStatus();
        });
        
        // Initialize
        console.log('üöÄ Test page ƒë√£ load');
        console.log('üîç battleCountdown:', battleCountdown);
        console.log('üîç battleCountdownNumber:', battleCountdownNumber);
        console.log('üîç battleSound:', battleSound);
        console.log('üîç preBattleSound:', preBattleSound);
        
        updateStatus();
    </script>
</body>
</html> 